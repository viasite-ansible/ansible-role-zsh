---
skip_golang_install: true

extra_pkg_mgr_cmds: "{% if ansible_os_family == 'Darwin' %}{% else %} update_cache=yes{% endif %}"
zsh_user_group: "{% if ansible_os_family == 'Darwin' %}staff{% else %}{{ zsh_user }}{% endif %}"
zsh_antigen_path: "{% if zsh_shared %}/usr/share/zsh-config{% else %}~{{ zsh_user }}/.antigen{% endif %}"
zsh_config: "{% if zsh_shared %}/usr/share/zsh-config/.zshrc{% else %}~{{ zsh_user }}/.zshrc{% endif %}"
zsh_antigen_path_compat: "{{ zsh_antigen_path | replace('~' + zsh_user, '$HOME') }}"

zsh_fzf_os: "{{ ansible_system | lower }}"
zsh_fzf_arch: "{% if '64' in ansible_architecture %}amd64{% else %}386{% endif %}"
zsh_fzf_url: "https://github.com/junegunn/fzf/releases/download/{{ zsh_fzf_version.stdout }}/fzf-{{ zsh_fzf_version.stdout }}-{{ zsh_fzf_os }}_{{ zsh_fzf_arch }}.tar.gz"
zsh_antigen_fzf_path: "{{ zsh_antigen_path }}/repos/https-COLON--SLASH--SLASH-github.com-SLASH-junegunn-SLASH-fzf.git"
zsh_fzf_default_opts: "--height={{ zsh_fzf_height }}{% if zsh_fzf_reverse %} --layout=reverse{% endif %} --info=inline{% if zsh_fzf_border %} --border{% endif %} --margin=1 --padding=1"

yadm_install_cmd: "git clone https://github.com/TheLocehiliosan/yadm.git {{ zsh_user_dir.stdout }}/.yadm-project && ln -s {{ zsh_user_dir.stdout }}/.yadm-project/yadm {{ zsh_user_dir.stdout }}/.local/bin/yadm"

yadm_repo_uri: "{% if 'Fedora' in ansible_distribution %}
  https://copr.fedorainfracloud.org/coprs/cdayjr/yadm/repo/{{ ansible_distribution | lower }}-{{ ansible_distribution_major_version }}/cdayjr-yadm-{{ ansible_distribution | lower }}-{{ ansible_distribution_major_version }}.repo
  {% else %}
  https://download.opensuse.org/repositories/home:TheLocehiliosan:yadm/{{ ansible_distribution }}_{{ ansible_distribution_major_version }}/home:TheLocehiliosan:yadm.repo
  {% endif %}"

basic_system_packages: ["wget", "curl", "tar", "gnupg"]

# https://docs.ansible.com/ansible/latest/user_guide/playbooks_conditionals.html#ansible-facts-distribution
_pkg_requirements:
  default:
    - zsh
    - git
    - telnet
    - ruby
    - whois
    - jq
    - zip
  Debian:
    - keychain
    - default-mysql-client
    - xz-utils
    - ipcalc
    - dnsutils
    - aptitude
    - perl-doc
    - procps
    - man-db
    - mtr
    - ruby-dev
    - pinentry-curses
    - traceroute
    - attr
  Ubuntu:
    - keychain
    - mysql-client
    - xz-utils
    - ipcalc
    - dnsutils
    - aptitude
    - nmap
    - perl-doc
    - ruby-dev
    - pinentry-curses
    - traceroute
    - attr
  CentOS:
    - keychain
    - MariaDB-client
    - bind-utils
    - bash-completion
    - nmap
    - ruby-devel
    - pinentry
    - traceroute
    - attr
  Fedora:
    - keychain
    - bind-utils
    - bash-completion
    - nmap
    - ruby-devel
    - pinentry
    - glibc-langpack-en
    - traceroute
    - attr
  Amazon:
    - nmap
    - ruby-devel
    - traceroute
    - attr
  MacOSX:
    - go
    - grc
    - fzf
    - tree
    - mtr
    - ncdu

pkg_requirements: "{% if 'kali' in ansible_distribution_release %}{{_pkg_requirements['default'] + _pkg_requirements['Debian']}}{% else %}{{ _pkg_requirements['default'] + _pkg_requirements[ansible_distribution] }}{% endif %}"

_python_requirements:
  default:
    - python3-pip
  Debian:
    - python3
  RedHat:
    - python3

python_requirements: "{{ _python_requirements['default'] + _python_requirements[ansible_os_family] }}"

pip_packages:
  - ansible
  - molecule-docker
  - yamllint
  - ansible-lint
  - lastversion
  - yq
  - awslogs
  - ssh-audit
  - crudini
  - j2cli
  - cfn-lint

python3_command: python3
pip3_command: pip3
python3_pyenv: null
